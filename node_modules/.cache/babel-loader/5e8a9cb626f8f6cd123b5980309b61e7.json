{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState } from \"react\";\n\nconst UserDetails = () => {\n  _s();\n\n  const {\n    admin,\n    setIsAdmin\n  } = useState(false);\n  const token = localStorage.getItem('token');\n  fetch(`http://localhost:8000/currentuser`, {\n    method: 'GET',\n    headers: {\n      'accept': 'application/json',\n      'Content-Type': 'application/json',\n      Authorization: \"Bearer \" + token.replace(/^\"(.*)\"$/, '$1')\n    }\n  }).then(async response => {\n    const data = await response.json();\n    localStorage.setItem('user_details', JSON.stringify(data));\n\n    if (data.user_role.name === \"admin\") {\n      localStorage.setItem('isAdmin', true);\n      setIsAdmin(true);\n    }\n  }).catch(error => {\n    setState({\n      errorMessage: error.toString()\n    });\n    console.error('There was an error!', error);\n  });\n  return {\n    setIsAdmin: UserDetails,\n    admin\n  };\n};\n\n_s(UserDetails, \"NrTVhW8ISrXLNA4MvMfZD8783zk=\");\n\n_c = UserDetails;\nexport default UserDetails;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserDetails\");","map":{"version":3,"sources":["D:/shopping-cart-react/src/components/UserDetails.js"],"names":["useState","UserDetails","admin","setIsAdmin","token","localStorage","getItem","fetch","method","headers","Authorization","replace","then","response","data","json","setItem","JSON","stringify","user_role","name","catch","error","setState","errorMessage","toString","console"],"mappings":";;AAAA,SAASA,QAAT,QAAyB,OAAzB;;AAEA,MAAMC,WAAW,GAAG,MAAM;AAAA;;AACtB,QAAM;AAAEC,IAAAA,KAAF;AAASC,IAAAA;AAAT,MAAwBH,QAAQ,CAAC,KAAD,CAAtC;AACA,QAAMI,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;AAEAC,EAAAA,KAAK,CAAE,mCAAF,EAAsC;AACvCC,IAAAA,MAAM,EAAE,KAD+B;AAEvCC,IAAAA,OAAO,EAAE;AACL,gBAAU,kBADL;AAEL,sBAAgB,kBAFX;AAGLC,MAAAA,aAAa,EAAE,YAAYN,KAAK,CAACO,OAAN,CAAc,UAAd,EAA0B,IAA1B;AAHtB;AAF8B,GAAtC,CAAL,CAQCC,IARD,CAQM,MAAMC,QAAN,IAAkB;AACpB,UAAMC,IAAI,GAAG,MAAMD,QAAQ,CAACE,IAAT,EAAnB;AACAV,IAAAA,YAAY,CAACW,OAAb,CAAqB,cAArB,EAAqCC,IAAI,CAACC,SAAL,CAAeJ,IAAf,CAArC;;AACA,QAAIA,IAAI,CAACK,SAAL,CAAeC,IAAf,KAAwB,OAA5B,EAAqC;AACjCf,MAAAA,YAAY,CAACW,OAAb,CAAqB,SAArB,EAAgC,IAAhC;AACAb,MAAAA,UAAU,CAAC,IAAD,CAAV;AACH;AACJ,GAfD,EAgBCkB,KAhBD,CAgBOC,KAAK,IAAI;AACZC,IAAAA,QAAQ,CAAC;AAAEC,MAAAA,YAAY,EAAEF,KAAK,CAACG,QAAN;AAAhB,KAAD,CAAR;AACAC,IAAAA,OAAO,CAACJ,KAAR,CAAc,qBAAd,EAAqCA,KAArC;AACH,GAnBD;AAqBA,SAAO;AACHnB,IAAAA,UAAU,EAAGF,WADV;AAEHC,IAAAA;AAFG,GAAP;AAIH,CA7BD;;GAAMD,W;;KAAAA,W;AA8BN,eAAeA,WAAf","sourcesContent":["import { useState } from \"react\";\r\n\r\nconst UserDetails = () => {\r\n    const { admin, setIsAdmin } = useState(false)\r\n    const token = localStorage.getItem('token')\r\n\r\n    fetch(`http://localhost:8000/currentuser`, {\r\n        method: 'GET',\r\n        headers: {\r\n            'accept': 'application/json',\r\n            'Content-Type': 'application/json',\r\n            Authorization: \"Bearer \" + token.replace(/^\"(.*)\"$/, '$1')\r\n        },\r\n    })\r\n    .then(async response => {\r\n        const data = await response.json();\r\n        localStorage.setItem('user_details', JSON.stringify(data));\r\n        if (data.user_role.name === \"admin\") {\r\n            localStorage.setItem('isAdmin', true);\r\n            setIsAdmin(true)\r\n        }\r\n    })\r\n    .catch(error => {\r\n        setState({ errorMessage: error.toString() });\r\n        console.error('There was an error!', error);\r\n    });\r\n    \r\n    return {\r\n        setIsAdmin : UserDetails,\r\n        admin\r\n    }\r\n}\r\nexport default UserDetails"]},"metadata":{},"sourceType":"module"}