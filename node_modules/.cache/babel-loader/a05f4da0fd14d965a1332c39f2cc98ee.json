{"ast":null,"code":"var _jsxFileName = \"D:\\\\shopping-cart-react\\\\src\\\\components\\\\UserDetails.js\",\n    _s = $RefreshSig$();\n\nimport { useState } from \"react\";\nimport { Redirect } from \"react-router\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst UserDetails = () => {\n  _s();\n\n  const [isAdmin, setIsAdmin] = useState(false);\n\n  const setUserDetails = token => {\n    fetch(`http://localhost:8000/currentuser`, {\n      method: 'GET',\n      headers: {\n        'accept': 'application/json',\n        'Content-Type': 'application/json',\n        Authorization: \"Bearer \" + token.replace(/^\"(.*)\"$/, '$1')\n      }\n    }).then(async response => {\n      const data = await response.json();\n      localStorage.setItem('user_details', JSON.stringify(data));\n\n      if (data.user_role.name === \"admin\") {\n        localStorage.setItem('isAdmin', true);\n        setIsAdmin(true);\n        return /*#__PURE__*/_jsxDEV(Redirect, {\n          to: \"/admin/dashboard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 22,\n          columnNumber: 24\n        }, this);\n      }\n    }).catch(error => {\n      console.error('There was an error!', error);\n    });\n  };\n\n  return {\n    setIsAdmin: setUserDetails,\n    isAdmin\n  };\n};\n\n_s(UserDetails, \"9Hg49Etl7LAhlVFl7Ay1SXtUuck=\");\n\n_c = UserDetails;\nexport default UserDetails;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserDetails\");","map":{"version":3,"sources":["D:/shopping-cart-react/src/components/UserDetails.js"],"names":["useState","Redirect","UserDetails","isAdmin","setIsAdmin","setUserDetails","token","fetch","method","headers","Authorization","replace","then","response","data","json","localStorage","setItem","JSON","stringify","user_role","name","catch","error","console"],"mappings":";;;AAAA,SAASA,QAAT,QAAyB,OAAzB;AACA,SAASC,QAAT,QAAyB,cAAzB;;;AAEA,MAAMC,WAAW,GAAG,MAAM;AAAA;;AACtB,QAAM,CAAEC,OAAF,EAAWC,UAAX,IAA0BJ,QAAQ,CAAC,KAAD,CAAxC;;AAEA,QAAMK,cAAc,GAAIC,KAAD,IAAW;AAC9BC,IAAAA,KAAK,CAAE,mCAAF,EAAsC;AAC3CC,MAAAA,MAAM,EAAE,KADmC;AAE3CC,MAAAA,OAAO,EAAE;AACL,kBAAU,kBADL;AAEL,wBAAgB,kBAFX;AAGLC,QAAAA,aAAa,EAAE,YAAYJ,KAAK,CAACK,OAAN,CAAc,UAAd,EAA0B,IAA1B;AAHtB;AAFkC,KAAtC,CAAL,CAQCC,IARD,CAQM,MAAMC,QAAN,IAAkB;AACpB,YAAMC,IAAI,GAAG,MAAMD,QAAQ,CAACE,IAAT,EAAnB;AACAC,MAAAA,YAAY,CAACC,OAAb,CAAqB,cAArB,EAAqCC,IAAI,CAACC,SAAL,CAAeL,IAAf,CAArC;;AACA,UAAIA,IAAI,CAACM,SAAL,CAAeC,IAAf,KAAwB,OAA5B,EAAqC;AACjCL,QAAAA,YAAY,CAACC,OAAb,CAAqB,SAArB,EAAgC,IAAhC;AACAb,QAAAA,UAAU,CAAC,IAAD,CAAV;AACA,4BAAO,QAAC,QAAD;AAAU,UAAA,EAAE,EAAE;AAAd;AAAA;AAAA;AAAA;AAAA,gBAAP;AACH;AACJ,KAhBD,EAiBCkB,KAjBD,CAiBOC,KAAK,IAAI;AACZC,MAAAA,OAAO,CAACD,KAAR,CAAc,qBAAd,EAAqCA,KAArC;AACH,KAnBD;AAoBH,GArBD;;AAsBA,SAAO;AACHnB,IAAAA,UAAU,EAAGC,cADV;AAEHF,IAAAA;AAFG,GAAP;AAIH,CA7BD;;GAAMD,W;;KAAAA,W;AA8BN,eAAeA,WAAf","sourcesContent":["import { useState } from \"react\";\r\nimport { Redirect } from \"react-router\";\r\n\r\nconst UserDetails = () => {\r\n    const [ isAdmin, setIsAdmin ] = useState(false)\r\n    \r\n    const setUserDetails = (token) => {\r\n        fetch(`http://localhost:8000/currentuser`, {\r\n        method: 'GET',\r\n        headers: {\r\n            'accept': 'application/json',\r\n            'Content-Type': 'application/json',\r\n            Authorization: \"Bearer \" + token.replace(/^\"(.*)\"$/, '$1')\r\n        },\r\n    })\r\n        .then(async response => {\r\n            const data = await response.json();\r\n            localStorage.setItem('user_details', JSON.stringify(data));\r\n            if (data.user_role.name === \"admin\") {\r\n                localStorage.setItem('isAdmin', true);\r\n                setIsAdmin(true)\r\n                return <Redirect to =\"/admin/dashboard\"/>\r\n            }\r\n        })\r\n        .catch(error => {\r\n            console.error('There was an error!', error);\r\n        });\r\n    }\r\n    return {\r\n        setIsAdmin : setUserDetails,\r\n        isAdmin\r\n    }\r\n}\r\nexport default UserDetails"]},"metadata":{},"sourceType":"module"}